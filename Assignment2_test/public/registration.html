<!DOCTYPE html>
<!-- Coding By CodingNepal - codingnepalweb.com -->
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Registration form </title>
    <link rel="stylesheet" href="registration.css">
</head>

<script>
    var params = (new URL(document.location)).searchParams;
    // on window onload execute function
    window.onload = function () {
        console.log('Window loaded!');
        if (params.has("errorsJSONstring")) {
            let errorsObject = JSON.parse(params.get("errorsJSONstring"));
            console.log('Errors Object:', errorsObject);

            // if there are errors in the validity of the email address format
            if (typeof errorsObject[`email_error`] != "undefined") {
                document.getElementById('email_error_span').innerHTML = errorsObject['email_error'];
            } //Name error
            else if (typeof errorsObject[`name_error`] != "undefined") {
                document.getElementById('name_error_span').innerHTML = errorsObject[`name_error`];
            } //Password error
            else if (typeof errorsObject[`password_error`] != "undefined") {
                document.getElementById('password_error_span').innerHTML = errorsObject[`password_error`];
            }// if there are repeat password errors, output errors
            else if (typeof errorsObject[`repeatpassword_error`] != "undefined") {
                document.getElementById('repeatpassword_error_span').innerHTML = errorsObject[`repeatpassword_error`];
            }
        }
    }
</script>


<body>
    <div class="wrapper">
        <h2>Registration</h2>
        <form action="/register" method="POST">
            <div class="input-box">
                <input type="text" name="email" placeholder="Enter your email" required>
                <span style="color:red" id="email_error_span"></span>
            </div>
            <div class="input-box">
                <input type="text" name="name" placeholder="Enter your full name" required>
                <span style="color:red" id="name_error_span"></span>
            </div>
            <div class="input-box">
                <input type="password" name="password" placeholder="Create password" required>
                <span style="color:red" id="password_error_span"></span>
            </div>
            <div class="input-box">
                <input type="password" name="repeatpassword" placeholder="Confirm password" required>
                <span style="color:red" id="repeatpassword_error_span"></span>
            </div>
            <div class="input-box button">
                <input type="Submit" value="Register Now">
            </div>
        </form>
    </div>
</body>

</html>